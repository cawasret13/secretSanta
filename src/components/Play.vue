<template>
    <button v-on:click="lookSanta(this.$route.params.id)" v-if="((getInfo['created'] && !getInfo['autoPlay']) && getInfoTO['guess'])" class="why" style="width: 100%;border-radius: 0;">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ–º —Å–∞–Ω—Ç!</button>
    <div>
        <div v-if="!getGuess">
            <h2 class="gametitle">–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!!!</h2>
            <h3 class="newYear">–ü–æ–∑–¥–∞–≤–ª—è–µ–º –≤–∞—Å —Å –ù–æ–≤—ã–º –≥–æ–¥–æ–º!üéÑüçæ</h3>
            <div class="cardPlay">
                <div class="infoCard">
                    <h3 class="title">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≥–∞–¥–∞—Ç—å –∫–æ–º—É –≤—ã –±—É–¥–µ—Ç–µ –¥–∞—Ä–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h3>
                    <h4 class="title">–£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å {{3 - this.a}} –ø–æ–ø—ã—Ç–∫–∏</h4>
                    <div class="listCard">
                        <div class="listPlayerCard" v-on:click="question(player['fullname'], getInfoTO['user'], index)" v-for="(player, index) in getPlayers">
                            <h1 v-if="(getInfoTO['from']!=player['fullname'])" class="card_player" v-bind:class="this.no[index]=='x'?'noA':''">
                                {{player['fullname']}}
                            </h1>
                            <h1 v-else class="card_player" v-bind:class="this.no[index]=='x'?'noA':''">
                                –≠—Ç–æ –≤—ã
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div v-else class="">
            <div v-if="!getFromActive" class="cardPlay mt">
                <div class="infoCard">
                    <div>
                        <h3 class="title">–ê –≤–æ—Ç –∏ –∫–æ–Ω–µ—Ü!</h3>
                        <h4 class="title" style="margin-bottom: 0;">–ü–æ—Ä–∞ –¥–∞—Ä–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏üéÖüéÅ</h4>
                        <hr>
                        <h2 class="nameTo">–í—ã –¥–∞—Ä–∏—Ç–µ –ø–æ–¥–∞—Ä–æ–∫: {{getInfoTO['user']}}</h2>
                        <h2 class="priceTo">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–¥–∞—Ä–∫–∞: {{getInfoTO['price']}}‚ÇΩ</h2>
                        <h2 class="wishTo">–ß–µ–ª–æ–≤–µ–∫ —Ö–æ—á–µ—Ç: </h2>
                        <h2 class="wishTo">{{getInfoTO['wish']}}</h2>
                        <h2 v-if="getInfoTO['from_']" class="nameTo">–í–∞–º –¥–∞—Ä–∏—Ç –ø–æ–¥–∞—Ä–æ–∫: {{getInfoTO['from_name']}}</h2>
                    </div>
                    <div>
                        <button v-if="getInfoTO['fromNam']" class="why" v-on:click="setActive(true)">–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –∫—Ç–æ –ø–æ–¥–∞—Ä–∏—Ç –≤–∞–º –ø–æ–¥–∞—Ä–æ–∫?</button>
                    </div>
                </div>
            </div>
            <div v-if="(getFromActive && getInfoTO['fromNam'])" class="cardPlay mt">
                <div class="infoCard">
                    <div>
                        <h3 class="title">–ö—Ç–æ —Ç–≤–æ–π —Å–∞–Ω—Ç–∞?</h3>
                        <h4 class="nameTo" style="margin-bottom: 5px;margin-top: 0;">–ï—Å–ª–∏ –≤—ã –Ω–µ —É–≥–∞–¥–∞–µ—Ç–µ, —Ç–æ —É–∑–Ω–∞–µ—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ–∑–¥–∞—Ç–µ–ª—å –∫–æ–º–Ω–∞—Ç—ã —Ä–∞–∑—Ä–µ—à–∏—Çü§ê</h4>
                        <h4 class="title" style="margin-bottom: 0;">–£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å {{(3-this.b)}} –ø–æ–ø—ã—Ç–∫–∏</h4>
                        <hr>
                        <div class="listCard">
                            <div v-on:click="santa(player['santa'], index)" class="listPlayerCard" v-for="(player, index) in getSantas" >
                                <h1 class="card_player" v-bind:class="this.no_b[index]=='x'?'noA':''">
                                    {{player['fullname']}}
                                </h1>
                            </div>
                        </div>
                    </div>
                    <div>
                        <button style="width: 100px;" class="why" v-on:click="(setActive(false))">–ù–∞–∑–∞–¥</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
   
</template>
<script>
    import { mapActions, mapGetters, mapMutations } from 'vuex';
    export default{
        methods:{
            ...mapActions(['getResualt', 'okRes', 'getUser', 'ActiongetSantas', 'setSanta', 'lookSanta']),
            ...mapMutations(['setActive']),
            question(name, fullname, index){
                if(this.a < 3){
                    if (name == fullname){
                        console.log("–û—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π")
                        this.okRes(this.$route.params.id)
                    }else{
                        console.log("–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ, –ø–æ–ø—ã—Ç–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å" + 3 - this.a)
                        this.no[index]='x'
                        this.a++
                        if(this.a == 3){
                            this.okRes(this.$route.params.id)
                        }
                    }
                }else{
                    console.log('–≠—Ç–æ –Ω–µ –≤–∞–∂–Ω–æ, —Ç—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ–ø–∞–ª –≤ –º–æ–µ —Å–µ—Ä–¥—Ü–µ')
                    this.okRes(this.$route.params.id)
                }
            },
            santa(santa, index){
                if(this.b < 3){
                    if (santa){
                        console.log("–û—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π")
                        const o =  this.setSanta([this.$route.params.id, 1])
                    }else{
                        console.log("–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ, –ø–æ–ø—ã—Ç–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å" + 3 - this.b)
                        this.no_b[index]='x'
                        this.b++
                        if(this.b == 3){
                           const o =  this.setSanta([this.$route.params.id, 0])
                        }
                    }
                }else{
                    console.log('–≠—Ç–æ –Ω–µ –≤–∞–∂–Ω–æ, —Ç—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ–ø–∞–ª –≤ –º–æ–µ —Å–µ—Ä–¥—Ü–µ')
                    const o =  this.setSanta([this.$route.params.id, 0])
                }
            }

        },
        computed: mapGetters(['getInfoTO', 'getPlayers', 'getGuess','getSantas', 'getFromActive', 'getInfo']),
        mounted(){
            this.getResualt(this.$route.params.id),
            this.ActiongetSantas(this.$route.params.id)
        },
        data(){
            return{
                a:0,
                b:0,
                no:[],
                no_b:[],
            }
        },
        updated(){
        }
    }

</script>
<style scoped>
@import url('../assets/style/play.css')
</style>